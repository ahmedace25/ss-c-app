
@if (groupedBookmarks$ | async; as groupedBookmarks) {
    <div class="bookmarks-container">
        <mat-form-field appearance="outline" class="search-container">
            <mat-label>Search Bookmarks</mat-label>
            <mat-icon matPrefix>search</mat-icon>
            <input matInput type="text" [(ngModel)]="searchTerm">
        </mat-form-field>
        @if (searchTerm().trim() === '') {
            @if (groupedBookmarks.today.length !== 0) {
                <mat-card class="bookmark-card">
                    <mat-card-header>
                        <mat-card-subtitle>Today</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <mat-list>
                            @for (bookmark of groupedBookmarks.today; track bookmark.id) {
                                <div class="bookmark">
                                    <mat-list-item>
                                        <mat-icon matListItemIcon>bookmark</mat-icon>
                                        <span matListItemTitle>{{ bookmark.title }}</span>
                                        <span matListItemLine>
                                            <a [href]="bookmark.url">{{ bookmark.url }}</a>
                                        </span>
                                    </mat-list-item>
                                    <button matIconButton [routerLink]="['/bookmark/', bookmark.id]">
                                            <mat-icon>edit</mat-icon>
                                    </button>
                                </div>
                            }
                        </mat-list>
                    </mat-card-content>
                </mat-card>
            }

            @if (groupedBookmarks.yesterday.length !== 0) {
                <mat-card class="bookmark-card">
                    <mat-card-header>
                        <mat-card-subtitle>Yesterday</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <mat-list>
                            @for (bookmark of groupedBookmarks.yesterday; track bookmark.id) {
                                <div class="bookmark">
                                    <mat-list-item>
                                        <mat-icon matListItemIcon>bookmark</mat-icon>
                                        <span matListItemTitle>{{ bookmark.title }}</span>
                                        <span matListItemLine>
                                            <a [href]="bookmark.url">{{ bookmark.url }}</a>
                                        </span>
                                    </mat-list-item>
                                    <button matIconButton [routerLink]="['/bookmark/', bookmark.id]">
                                            <mat-icon>edit</mat-icon>
                                    </button>
                                </div>
                            }
                        </mat-list>
                    </mat-card-content>
                </mat-card>
            }

            @if (groupedBookmarks.older.length !== 0) {
                <mat-card class="bookmark-card">
                    <mat-card-header>
                        <mat-card-subtitle>Older</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <mat-list>
                            @for (bookmark of groupedBookmarks.older; track bookmark.id) {
                                <div class="bookmark">
                                    <mat-list-item>
                                        <mat-icon matListItemIcon>bookmark</mat-icon>
                                        <span matListItemTitle>{{ bookmark.title }}</span>
                                        <span matListItemLine>
                                            <a [href]="bookmark.url">{{ bookmark.url }}</a>
                                        </span>
                                    </mat-list-item>
                                    <button matIconButton [routerLink]="['/bookmark/', bookmark.id]">
                                            <mat-icon>edit</mat-icon>
                                    </button>
                                </div>
                            }
                        </mat-list>
                    </mat-card-content>
                </mat-card>
            }
        } @else {
            @if (filteredBookmarks()) {
                <mat-card class="bookmark-card">
                    <mat-card-header>
                        <mat-card-subtitle>Results for "{{searchTerm()}}"</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <mat-list>
                            @for (bookmark of filteredBookmarks(); track bookmark.id) {
                                <div class="bookmark">
                                    <mat-list-item>
                                        <mat-icon matListItemIcon>bookmark</mat-icon>
                                        <span matListItemTitle>{{ bookmark.title }}</span>
                                        <span matListItemLine>
                                            <a [href]="bookmark.url">{{ bookmark.url }}</a>
                                        </span>
                                    </mat-list-item>
                                    <button matIconButton [routerLink]="['/bookmark/', bookmark.id]">
                                            <mat-icon>edit</mat-icon>
                                    </button>
                                </div>
                            }
                        </mat-list>
                    </mat-card-content>
                </mat-card>
            }
        }
    </div>
}